!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.AnimateFrame=e()}(this,function(){"use strict";function n(n){return.5-Math.cos(n*Math.PI)/2}function e(n){var e=this;e.isRun=!1,e.isPause=!1,e.iterationCount=0,e._frameId=null,e._playTime=0,n.easing=n.easing||r,n.speed=a[n.speed]||n.speed,n.iteration=n.iteration!==u&&n.iteration<1?1:n.iteration,e.options=n}var i="undefined"!=typeof window?window:"undefined"!=typeof global?global:this,t=i&&i.requestAnimationFrame,o=i&&i.cancelAnimationFrame,a={slow:600,fast:200,normal:400},s=Math.floor(1e3/77),u="infinite",r=n,f=t||function(n){return setTimeout(n,s)},p=o||function(n){clearTimeout(n)};return e.prototype={constructor:e,run:function(){function n(){var t=new Date,o=void 0;e._playTime+=t-i,o=e._playTime/e.options.speed,o=Math.min(o,1),e._frame(o),o<1?(i=t,e._frameId=f(n)):(e.stop(),e.iterationCount++,e.options.iteration===u||e.options.iteration>e.iterationCount?e.run():e.iterationCount=0)}var e=this,i=void 0;return!e.isRun&&(e.isPause?e.isPause=!1:this._callFun("begin",[e]),e.isRun=!0,i=new Date,e._frameId=f(n),!0)},pause:function(){var n=this;n.isPause||!1===n.isRun||(n.isRun=!1,n.isPause=!0,p(n._frameId),n._callFun("pause",[n]))},stop:function(n){var e=this;!1===e.isRun&&!1===e.isPause||(n&&e._frame(1),e.isRun=!1,e.isPause=!1,e._playTime=0,p(e._frameId),e._callFun("finish",[e]))},_frame:function(n){var e=this;e._callFun("frame",[n,e.options.easing(n,0,1,1),e])},_callFun:function(n,e){var i=this,t=i.options[n];if("function"==typeof t)t.apply(i,e);else if("object"==typeof t&&"number"==typeof t.length)for(var o=0;o<t.lenght;o++)t[o].apply(i,e)}},e});